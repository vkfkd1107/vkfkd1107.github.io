# 데몬(Daemon)의 개념과 역할

리눅스 시스템에서 백그라운드로 실행되는 프로세스

## 기본개념
**Daemon은 사용자가 직접 제어하지 않고도 백그라운드에서 자동으로 실행되며, 특정 서비스를 제공한다**

- **일반 프로그램**: 사용자가 실행 -> 작업 완료 -> 종료
- **데몬**: 시스템 시작 시 실행 -> 요청 대기 -> 요청 처리 -> 다시 대기(무한 루프)

## 데몬이 하는 일

**1. 자동 시작**
- 컴퓨터가 켜질 때 자동으로 웹서버 프로그램을 시작
- 사용자가 수동으로 시작할 필요 없음

**2. 24시간 대기**
- 웹사이트 접속 요청이 올 때까지 계속 대기
- 요청이 없어도 프로그램이 종료되지 않음

**3. 요청 처리**
- 사용자가 웹사이트 접속하면 즉시 응답
- 웹페이지를 제공하거나 API 응답 생성

**4. 자동 종료**
- 컴퓨터가 꺼질 때 웹서버 프로그램을 정리하고 종료

### 데몬없이 웹서버를 운영한다면?

**수동 관리해야 하는 것들**
- 매번 웹서버 시작: 사용자가 접속할때마다 개발자가 웹서버를 수동으로 시작 
- 수동 모니터링: 웹서버가 죽었는지 계속 확인
- 수동 재시작: 문제 발생 시 개발자가 직접 재시작
- 부팅 후 수동 시작: 컴퓨터 재부팅 후 웹서버를 수동으로 시작

### **실제 상황**
- 데몬 없음: 개발자가 24시간 모니터링하며 수동으로 관리해야 함
- 데몬 있음: 시스템이 자동으로 관리하므로 개발자는 다른 일에 집중 가능

## 사용되는 곳
- 시스템 레벨
    - **부팅 시**: 시스템 초기화, 네트워크 설정, 서비스 시작
    - **운영 중**: 로그 관리, 백업, 모니터링
    - **종료 시**: 데이터 저장, 서비스 정리
- 네트워크 서비스
    - **웹서버**: HTTP 요청 처리
    - **데이터베이스**: SQL 쿼리 처리
    - **메일서버**: 이메일 송수신
    - **FTP 서버**: 파일 전송
    - **SSH 서버**: 원격 접속
- 애플리케이션 레벨
    - **로깅**: 애플리케이션 로그 수집
    - **모니터링**: 성능 지표 수집
    - **백업**: 정기적인 데이터 백업
    - **동기화**: 파일 동기화, 데이터 동기화

## 이름 규칙
- 데몬의 이름은 보통 프로세스 이름 뒤에 `d`를 붙입니다
- **예시**:
  - `httpd` (HTTP 데몬)
  - `mysqld` (MySQL 데몬)
  - `sshd` (SSH 데몬)
  - `nginx` (Nginx는 예외적으로 d가 없음)


## 데몬 관리 방법

### systemd(현대적 방식)
**역할**: 리눅스 시스템의 데몬 관리자  
**위치**: `/etc/systemd/system/`, `/lib/systemd/system/`  
**주요 기능**
- 데몬 시작/중지/재시작
- 부팅 시 자동 시작 설정
- 데몬 상태 모니터링
- 서비스 간 의존성 관리

### init.d(전통적 방식)

### 실행파일 위치
**역할**: 실제 데몬 프로그램이 저장된 곳  
**위치**: `/usr/bin/`, `/usr/sbin/`, `/bin/`, `/sbin/`

## 프로세스 확인
```bash
ps aux | grep nginx
```

## 특징
1. 터미널과 분리
    - 일반 프로그램: 터미널 창에서 실행, 결과를 화면에 출력
    - 데몬: 터미널과 연결되지 않고, 로그파일(`/var/log/`)에만 기록
2. 부모 프로세스 없음
    - 일반 프로그램: 사용자 세션의 자식으로 생성
    - 데몬: init(PID 1)의 자식으로 생성
    - 결과: 사용자가 로그아웃해도 계속 실행
3. 자동 시작과 지속 실행
    - 부팅 시: 시스템과 함께 자동 시작
    - 운영 중: 계속 실행되어 요청 대기
    - 종료 시: 시스템과 함께 정리하고 종료
