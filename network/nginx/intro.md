# Intro

nginx는 뭐고 왜 쓰는걸까?  
로컬에서는 nginx없이도 잘 동작하는데 왜 서버 배포를 할 때 항상 설정하는걸까?

이 의문에 대한 답을 해결하고자 글을 작성한다.  

---

# Nginx는 무엇인가
nginx는 http 요청을 처리하는 웹 서버 소프트웨어다.  
백엔드 서버는 nginx가 전달한 요청을 받아서 비즈니스 로직을 처리하고, 결과를 반환한다.

# 왜 필요한가요?
### 백엔드 서버는 nginx없이도 작동하는데, 왜 필요한걸까?
백엔드 서버는 기본적으로 개발용 서버를 제공하기 때문에 작동은 한다.  
하지만, 실제 서버에서는 백엔드 서버만으로는 부족하다.  
실제 서버는 로컬서버와 다르게 많은 사용자가 접속할 수 있어야하고 빠르게 응답해야한다.  
또한 실서버는 여러 서버가 유저의 요청을 처리하는데 그걸 효과적으로 처리해야한다.  

즉, 웹 서버 역할은 nginx가 처리하고 백엔드 서버는 비즈니스 로직에 집중한다.


# Nginx의 역할
<img src="/network/nginx/images/nginx.png" width="80%">  

- **정적파일 서빙**
    - 정적파일은 nginx가 직접 전송 (C언어로 만들어져 있어 빠름)
    - 배포할 때, static 폴더를 nginx에 설정하여 정적파일을 서빙
    - API 요청: 백엔드 서버에 전달
- **부하 분산 (로드 밸런싱)**
    - 여러 백엔드 서버가 있을 때, 요청을 골고루 분산시켜서 처리합니다.
    - 예시: 같은 컴퓨터에서 8001, 8002, 8003 포트로 백엔드 서버를 여러 개 실행하거나, 여러 서버 컴퓨터로 분산시킬 수 있습니다.
    - nginx가 여러 백엔드 서버 중 하나를 선택해서 요청을 전달한다.
    - 예시: 클라이언트가 `https://example.com/api/post/create`로 요청 → nginx가 443 포트에서 받아서 → 백엔드 서버(8001 포트)에 전달    - HTTPS(암호화된 통신)를 처리
    - 클라이언트 → nginx (HTTPS 복호화) → 백엔드 서버 (HTTP)
    - 백엔드 서버 → nginx (HTTP → HTTPS 암호화) → 클라이언트
- **보안 강화**ㅣ
    - 백엔드 서버로 직접 요청받지 않고, nginx를 통해 요청받기 때문에 보안을 강화할 수 있다.
- **로깅/모니터링**
    - 요청과 응답에 대한 로그 기록
